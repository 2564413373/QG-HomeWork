<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <script src="jquery-3.7.1.js" type="text/javascript"></script>
    <script>var count = 0</script>
    <script>
        $(document).ready(function () {
                $("#btn").click(function () {
                    var username = $('#username').val();
                    var phonenumber = $('#phonenumber').val();
                    var IDcard = $('#IDcard').val();
                    var password = $('#password').val();
                    var password1 = $('#password1').val();

                    /////  如果没有再次输入密码，就退出函数
                    if (password != password1) {
                        alert("两次输入的密码不一致，请重新输入！！！");
                        ++count;
                        if (count > 2) {
                            ////// 直接移除事件，不给提交
                            $('#btn').off();
                            alert("你输入密码的次数已超过次数限制，请重新访问！！！");
                        }
                        return;
                    }
                        ////  发送AJAX请求
                        $.ajax({
                            type: "POST",
                            url: "http://localhost:8080/LoginRegister-Demo/User?method=register",
                            data: {
                                "username": username,
                                "phonenumber": phonenumber,
                                "IDcard": IDcard,
                                "password": password
                            },
                            dataType: "json",
                            success: function (response) {
                                alert(response.message);
                            },
                            error: function (xhr,status,error) {
                                alert("注册失败！！！");
                            }
                        })
                    })
                })
    </script>
</head>
<body>
    <h1>用户注册</h1><br><br>
    用户名: <input type="text" id="username"><br><br>
    手机号: <input type="text" id="phonenumber"><br><br>
    身份证号: <input type="text" id="IDcard"><br><br>
    密码(八位数字):   <input type="password" id="password"><br><br>
    再一次输入密码（八位数字）: <input type="password" id="password1"><br><br>
    <button id="btn">注册</button>
<div id="result"></div>
</body>
</html>